@startuml

User -> Api: post/chat(message)
    Api -> Workflow: run(message)
        Workflow -> IntentParserLambda: execute({message})
            IntentParserLambda -> OpenAI: chat.completions.create()
            IntentParserLambda <-- OpenAI: json
        Workflow <-- IntentParserLambda: ServiceResponse<ParsedIntent>
        Workflow -> AvailabilityLambda: execute({intent})
            AvailabilityLambda -> BookingService: check_availability(date, time)
            AvailabilityLambda <-- BookingService: list[Slot]
        Workflow <-- AvailabilityLambda: ServiceResponse<AvailabilityResult>
        Workflow -> BookingLambda: execute({slot})
            BookingLambda -> BookingService: book(slotId)
            BookingLambda <-- BookingService: Booking
        Workflow <-- BookingLambda: ServiceResponse<BookingResult>
    Api <-- Workflow: result
User <-- Api: ChatResponse

@enduml
